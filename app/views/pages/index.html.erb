
<% if user_signed_in? %>
<div class="w-4/5 mx-auto flex flex-col gap-8">
  <h1 class="text-8xl font-medium text-red-700 text-center my-32">ORPAL</h1>
  <div class="w-full flex">
    <div class="w-1/2 flex flex-col justify-center items-center p-4 gap-8">
      <div class="w-full text-center text-4xl text-red-700">
        Movimientos
        <span><%= Movement.count %></span>
      </div>
      <div class="w-full flex justify-between items-center border border-slate-400 rounded-lg p-4">
        <div class="single-chart">
          <% color = ['orange','green','blue', 'yellow'] %>
          <h1 class="text-xl text-center font-semibold text-red-700">DELIVERY</h1>
          <svg viewBox="0 0 36 36" class="circular-chart <%= color.sample %>">
            <path class="circle-bg"
              d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <path class="circle"
              stroke-dasharray="<%= circle_percentage(Movement.delivery.count, Movement.count) %>, 100"
              d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <text x="18" y="20.35" class="percentage"><%= number_to_percentage(circle_percentage(Movement.delivery.count, Movement.count), precision:1)%></text>
          </svg>
        </div>

        <div class="single-chart">
          <% color = ['orange','green','blue', 'yellow'] %>
          <h1 class="text-xl text-center font-semibold text-red-700">PICKUP</h1>
          <svg viewBox="0 0 36 36" class="circular-chart <%= color.sample %>">
            <path class="circle-bg"
              d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <path class="circle"
              stroke-dasharray="<%= circle_percentage(Movement.pickup.count, Movement.count) %>, 100"
              d="M18 2.0845
                a 15.9155 15.9155 0 0 1 0 31.831
                a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <text x="18" y="20.35" class="percentage"><%= number_to_percentage(circle_percentage(Movement.pickup.count, Movement.count), precision:0)%></text>
          </svg>
        </div>
      </div>
    </div>
    <div class="w-1/2 flex flex-col justify-center items-center p-4 gap-8">
      <div class="w-full text-center text-4xl text-red-700">
        Clientes
      </div>
      <div class="w-full flex justify-between items-center border border-slate-400 rounded-lg p-4">
        <%= turbo_frame_tag :customers, src: customers_path, class:'w-full' do %>
          loading...
        <% end %>
      </div>
    </div>
  </div>
</div>
<% else %>
  <%= turbo_frame_tag :login, class: 'w-full min-h-[calc(100vh-40px)] flex flex-col justify-start items-center gap-32' do %>
    <h1 class="text-8xl font-medium text-red-700 text-center my-32">ORPAL</h1>
    <div class="flex justify-center items-center">
      <%= link_to new_user_session_path, class: 'flex justify-between items-center bg-blue-500 shadow-ouline shadow-lg shadow-blue-200 hover:bg-blue-700 py-2 px-6 rounded focus:outline-none focus:shadow-outline cursor-pointer' do %>
        <span class="text-white text-2xl font-bold mx-2">Entrar</span>  
        <span class="w-8 h-8 flex justify-center items-center mx-2 border-2 border-white rounded-full">
          <%= inline_svg_tag('icons/user.svg', class: 'w-6 h-6 text-white')%>
        </span>
      <% end %>
    <% end %>
  </div>
<% end %>

